# 고객 요구사항 명세서 (CuRS) - DLT Log Analyzer

*   **문서 버전:** 1.6
*   **작성일:** 2023-10-27
*   **최종 수정일:** 2025-09-25
*   **작성자:** 김경호
*   **검토자:** 김경호

---

## 변경 이력

| 버전 | 날짜       | 변경 내용                                                                                             | 작성자  |
| :--- | :--------- | :---------------------------------------------------------------------------------------------------- | :------ |
| 1.6  | 2025-09-25 | 종합 평가 피드백 반영(테스트, 배포, 접근성 등), 3단계 분석 프로세스 기술 방안 구체화 및 요구사항 보완 | Gemini  |
| 1.3  | 2025-09-20 | 문서 날짜 최신화 및 헤더 정리                                                                         | Gemini  |
| 1.2  | 2023-10-28 | 플러그인 아키텍처 요구사항(FR-10, NFR-06) 추가 및 전반적인 문서 검토/수정                               | Gemini  |
| 1.1  | 2023-10-27 | 초기 문서 작성 및 요구사항 구체화(사용자 시나리오, 협업 기능 등)                                        | Gemini  |

## 1. 프로젝트 개요 (Overview)

본 프로젝트는 개발자들이 DLT(Diagnostic Log and Trace) 로그 파일을 효율적으로 분석할 수 있도록 돕는 Windows 데스크톱 애플리케이션을 개발하는 것을 목표로 한다.

프로그램의 핵심 분석 프로세스는 다음 3단계로 구성된다.

1.  **1단계: 규칙 기반 1차 분석 (FR-03)**
    *   개발자의 경험과 지식을 정형화된 '규칙'으로 만들어 신속하게 로그를 필터링하고 분류한다.
    *   **기술 및 구현 방안**:
        *   **로그 파싱(Log Parsing)**: DLT 표준 포맷을 해석하고 구조화된 데이터로 변환하는 엔진. C++ 언어로 구현하여 대용량 파일 처리 성능을 확보하고, 기존 dlt-daemon 등의 오픈소스 로직을 참고하여 개발한다. (NFR-03 충족)
        *   **규칙 엔진(Rules Engine)**: 사용자가 정의한 규칙을 읽어 로그 데이터에 적용하는 엔진. 규칙 파일은 사람이 읽고 수정하기 쉬운 JSON/YAML 형식으로 설계하며, C++(std::regex) 또는 Python(re)의 정규 표현식 라이브러리를 활용한다.
        *   **사용자 인터페이스(UI)**: 규칙 관리자를 포함한 UI는 Python + PyQt 조합으로 개발한다. 빠른 개발 속도와 C++로 작성된 고성능 파싱 엔진과의 용이한 연동성을 확보한다.

2.  **2단계: AI 기반 심층 분석 (FR-04)**
    *   1단계 분석 결과를 바탕으로 AI를 활용하여 사람이 놓치기 쉬운 패턴이나 복잡한 상관관계를 파악한다.
    *   **기술 및 구현 방안**:
        *   **AI 모델 연동**: Google Gemini API 또는 OpenAI GPT API와 같은 검증된 클라우드 기반 LLM(대규모 언어 모델) API를 활용하여 로그의 맥락과 상관관계를 분석한다.
        *   **데이터 전처리**: 보안 요구사항(NFR-05)에 따라, AI 분석에 필요한 최소한의 정제된 로그 스니펫만 API로 전송하는 모듈을 구현한다. 이는 보안을 강화하고 API 비용을 절감한다.
        *   **프롬프트 엔지니어링(Prompt Engineering)**: 사용자의 자연어 질의와 로그의 구조화된 정보(타임스탬프, APP ID 등)를 효과적으로 결합하여 AI에 전달함으로써 분석 정확도를 높인다.

3.  **3단계: 실행 가능한 해결책 제시 (FR-05)**
    *   AI가 제시한 솔루션을 사용자가 검토하고 추가 정보를 결합하여 최종 해결책을 도출한다.
    *   **기술 및 구현 방안**:
        *   **외부 정보 연동**: 사용자가 제공하는 소스코드나 기술 문서를 불러와 AI 분석 결과와 함께 볼 수 있는 파일 입출력 기능 및 소스코드 뷰어를 구현한다.
        *   **AI 대화형 UI**: 분석 결과에 대해 사용자가 추가 질문을 하고 AI가 답변하는 채팅 형태의 대화형 인터페이스를 설계하여 개발자와 AI 간의 협업을 지원한다.
        *   **최종 솔루션 제시**: AI가 제시한 해결 방안을 "memory_manager.cpp의 125번째 라인을 확인하세요"와 같이 구체적이고 실행 가능한 가이드로 시각화하여 제공한다.

이러한 다단계 분석을 통해 프로그램은 최종적으로 분석된 결과와 잠재적인 문제의 해결 방안을 제시하여 개발자의 디버깅 시간 단축과 정확도 향상에 기여한다.

## 2. 프로젝트 목표 (Goals)

*   **개발 시간 절약:** 반복적이고 시간이 많이 소요되는 로그 분석 작업을 자동화하여 개발자의 생산성을 높인다.
*   **분석 정확도 향상:** 규칙 기반의 정형화된 분석과 AI를 통한 심층 분석을 결합하여 사람의 실수나 편견을 줄이고, 더 정확한 원인 분석을 가능하게 한다.
*   **문제 해결 지원:** 분석된 문제점에 대해 AI가 가능한 해결 방안이나 관련 정보를 제시하여, 특히 경험이 적은 개발자에게 효과적인 가이드를 제공한다.

## 3. 사용자 프로필 (User Profile)

*   **주요 사용자 그룹:**
    *   **SW 개발자:** DLT 로그를 통해 소프트웨어의 동작, 오류, 성능을 분석하는 개발자.
    *   **테스터/QA 엔지니어:** 테스트 중 발생한 로그를 분석하여 결함 및 품질 이슈를 파악하는 담당자.
    *   **기술지원 엔지니어:** 고객 현장이나 서비스 과정에서 수집된 로그를 분석하여 신속한 문제 해결을 지원하는 엔지니어.
*   **공통적인 문제점 (Pain Point):**
    *   대용량 로그 파일을 수작업으로 분석하는 데 많은 시간이 소요됨.
    *   복잡한 로그 속에서 특정 오류의 근본 원인을 파악하기 어려움.
    *   분석 결과를 팀원과 공유하고 협업하는 과정이 번거로움.
*   **요구 기술 수준:**
    *   DLT 로그의 기본 구조를 이해하고 있으며, 디버깅 툴 사용 경험이 있음.

## 4. 기능 요구사항 (Functional Requirements)

### 4.1 사용자 시나리오 (User Scenarios)

*   **시나리오 1: 개발자의 신속한 디버깅**
    1.  개발자가 DLT 로그 파일을 툴에 드래그 앤 드롭한다.
    2.  툴이 로그를 즉시 파싱하고, 'Error', 'Warning' 등 심각도에 따라 로그를 자동 분류 및 하이라이팅한다.
    3.  개발자가 특정 에러 로그와 관련하여 "이 에러의 주된 원인은 무엇이야?"라고 자연어로 질문한다.
    4.  AI가 해당 로그의 전후 100개 메시지를 분석하여 "메모리 할당 실패 직후 발생했으며, 관련 커널 로그를 확인해야 합니다." 와 같은 잠재적 원인을 제시한다.

*   **시나리오 2: QA 엔지니어의 결함 리포트 작성**
    1.  QA 엔지니어가 테스트 중 발생한 DLT 로그를 연다.
    2.  `FR-03`의 규칙 기반 분석을 통해 '네트워크 연결 실패' 패턴이 5회 반복된 것을 확인한다.
    3.  `FR-06` 기능을 사용하여 해당 로그 부분과 AI의 분석 요약을 포함한 CSV 리포트를 생성하여 개발팀에 전달한다.

*   **시나리오 3: 기술 지원팀의 현장 문제 분석**
    1.  고객사에서 전달받은 로그 파일을 연다.
    2.  AI 분석을 통해 "알려진 이슈 XYZ-123과 90% 일치하며, 해결을 위해 펌웨어 버전 1.2.3으로 업데이트가 필요합니다." 라는 해결 방안을 얻는다.
    3.  이를 바탕으로 고객에게 신속하게 해결책을 안내한다.

### 4.2 기능 요구사항 목록 (Functional Requirements List)

| ID      | 요구사항 명                               | 상세 설명                                                                                                                                                                                                                         |
| :------ | :---------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **FR-01** | **DLT 로그 파일 처리**                    | 사용자는 로컬 시스템에 저장된 DLT 로그 파일(\*.dlt)을 열거나 드래그 앤 드롭으로 가져올 수 있어야 한다. 여러 파일을 동시에 열 수 있어야 한다.                                                                                             |
| **FR-02** | **DLT 로그 파싱**                         | 프로그램은 DLT 표준 포맷에 따라 로그 파일을 파싱하여 각 로그 메시지를 구조화된 데이터(타임스탬프, ECU ID, APP ID, Context ID, 페이로드 등)으로 변환해야 한다.                                                                         |
| **FR-03** | **규칙 기반 1차 분석 및 관리**            | 사용자가 직접 정의하거나 프로그램이 기본 제공하는 규칙(예: 특정 키워드, 에러 레벨 등)에 따라 로그를 필터링하거나 그룹화해야 한다. 사용자가 규칙을 생성, 편집, 가져오기/내보내기 할 수 있는 '규칙 관리자' UI를 제공해야 한다.         |
| **FR-03.1** | **규칙 관리자 UI**                        | 개발자가 직접 JSON 형식의 규칙을 작성하는 것은 비효율적이므로, 사용자 친화적인 UI를 통해 규칙을 생성, 편집, 삭제할 수 있어야 한다. 이 UI는 사용자의 입력을 기반으로 규칙 파일을 자동으로 생성 및 관리한다.                               |
| **FR-03.2** | **규칙 생성 지원 기능**                   | 규칙 관리자 UI는 다음과 같은 상세 기능을 제공하여 사용자의 편의성을 높여야 한다.<br/>- **입력 필드**: 규칙 이름, 설명, 로그 레벨, APP ID, 키워드 등 규칙의 구성 요소를 쉽게 입력할 수 있는 UI 제공<br/>- **정규 표현식 빌더**: 복잡한 정규 표현식을 쉽게 만들 수 있도록 돕는 빌더 기능 제공<br/>- **시퀀스 빌더**: '로그 A 발생 후 로그 B 발생'과 같은 순차적인 로그 패턴을 시각적으로 구성하는 기능 제공 |
| **FR-03.3** | **규칙 일괄 가져오기/내보내기**           | 사용자는 다수의 규칙을 효율적으로 관리하기 위해 일괄 가져오기 및 내보내기 기능을 사용할 수 있어야 한다.<br/>- **가져오기**: 사전에 정의된 템플릿(Excel 등)에 작성된 규칙 목록을 프로그램으로 가져와 자동으로 규칙 파일로 변환할 수 있어야 한다.<br/>- **내보내기**: 현재 프로그램에 등록된 규칙 전체 또는 선택한 규칙들을 다른 사용자와 공유하거나 백업할 수 있도록 단일 파일(JSON/YAML)로 내보낼 수 있어야 한다. |
| **FR-04** | **AI 기반 심층 분석 (핵심 기능)**         | 1차 분석 결과를 바탕으로, AI 모델(LLM)을 활용하여 로그의 전후 맥락을 파악하고, 비정상적인 패턴이나 잠재적 원인이 될 수 있는 상관관계를 식별하는 심층 분석을 수행해야 한다. 사용자는 자연어 질의를 통해 로그 데이터를 탐색할 수 있어야 한다. |
| **FR-05** | **AI 기반 해결 방안 제시**                | 심층 분석을 통해 식별된 문제점에 대해, AI가 알려진 해결 방법, 관련 기술 문서나 스택오버플로우 링크 등 문제 해결에 도움이 될 만한 정보를 제시해야 한다.                                                                           |
| **FR-06** | **분석 결과 내보내기(Export)**            | 원본 로그, 1차 분석 결과, AI 분석 내용 등을 포함한 종합 리포트를 텍스트(.txt)나 CSV(.csv) 파일 형식으로 내보낼 수 있어야 한다.                                                                                                    |
| **FR-07** | **분석 결과 시각화 강화**                 | 파싱된 로그는 테이블 뷰로 표시되어야 한다. 분석 결과는 하이라이팅, 요약 외에 '모듈별 로그 발생 빈도 추이', '시간대별 에러 발생 분포', '다른 시스템 로그(예: CAN)와의 연관성 그래프' 등 고급 시각화 기능을 포함해야 한다.             |
| **FR-08** | **분석 세션 저장 및 공유**                | 현재 분석 중인 로그 파일, 적용된 필터, AI 대화 내용, 주석 등을 하나의 '세션' 파일로 저장하고, 다른 팀원이 이 파일을 열어 분석을 이어갈 수 있어야 한다.                                                                             |
| **FR-09** | **주석 및 태그 기능**                     | 특정 로그 라인이나 분석 결과에 사용자가 코멘트나 태그(예: `#MemoryLeak`, `#Investigating`)를 추가하여 분석 내용을 기록하고 팀원과 공유할 수 있어야 한다.                                                                          |
| **FR-10** | **플러그인 아키텍처 지원**                | 프로그램의 핵심 기능을 확장할 수 있도록 플러그인 아키텍처를 지원해야 한다. 이를 통해 사용자는 새로운 분석 규칙, 시각화 방식, 또는 다른 로그 포맷 지원 기능(예: CAN 로그 파서)을 추가할 수 있어야 한다.                                  |
| **FR-10.1** | **플러그인 인터페이스 정의**              | 플러그인 개발을 위한 명확한 API와 인터페이스(예: `IParserPlugin`, `IRulePlugin`, `IVisualizationPlugin`)를 제공해야 한다. 각 인터페이스는 플러그인의 초기화, 실행, 종료 라이프사이클을 관리할 수 있어야 한다.                               |
| **FR-10.2** | **플러그인 관리 기능**                    | 사용자가 플러그인을 설치, 활성화/비활성화, 삭제할 수 있는 '플러그인 관리자' UI를 제공해야 한다. 프로그램은 시작 시 플러그인을 안전하게 로드하고, 충돌 발생 시 해당 플러그인을 격리할 수 있어야 한다.                                       |
| **FR-11** | **배포 및 업데이트**                      | 사용자가 쉽게 설치할 수 있는 인스톨러(MSI, EXE 등)를 제공해야 한다. 프로그램 시작 시 새로운 버전을 확인하고 사용자에게 알리는 자동 업데이트 확인 기능을 포함해야 한다.                                                              |
| **FR-12** | **운영 및 진단 기능**                     | 프로그램의 동작 상태, 오류, 성능 등을 기록하는 상세 로깅 기능을 제공해야 한다. 사용자는 로그 레벨을 조절하고 로그 파일을 쉽게 확인할 수 있어야 하며, 현재 설정 정보를 내보내거나 초기화하는 기능을 제공해야 한다.                     |


## 5. 비기능 요구사항 (Non-functional Requirements)

| ID      | 요구사항 명         | 상세 설명                                                                                                                                                                                                                         |
| :------ | :------------------ | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **NFR-01** | **플랫폼 호환성**   | Windows 10 및 Windows 11 환경에서 실행되는 64비트 데스크톱 애플리케이션이어야 한다.                                                                                                                                                  |
| **NFR-02** | **기술 스택**       | 개발 및 유지보수의 편의성을 위해 단일 프로그래밍 언어와 프레임워크를 사용하는 것을 선호한다. (예: Python과 PyQt/Tkinter, 또는 C#과 WPF/WinUI)                                                                                        |
| **NFR-03** | **성능 (Performance)** | 100MB 크기의 DLT 로그 파일을 10초 이내에 열고 파싱할 수 있어야 한다. UI는 사용자의 입력에 1초 이내로 반응해야 한다.                                                                                                                   |
| **NFR-04** | **사용성 (Usability)** | 사용자는 별도의 매뉴얼 없이도 프로그램의 핵심 기능을 직관적으로 사용할 수 있어야 한다.                                                                                                                                                  |
| **NFR-05** | **보안 (Security)**     | AI 서비스(예: OpenAI API) 연동 시 사용자의 API 키는 안전하게 로컬 시스템에 암호화되어 저장되어야 한다. 로그 데이터는 외부로 전송되지 않아야 한다(AI 분석 요청 시 필요한 최소한의 정제된 데이터만 전송).                               |
| **NFR-06** | **확장성 (Extensibility)** | 새로운 분석 규칙, 시각화 모듈, 외부 데이터 연동 기능 등을 플러그인 형태로 쉽게 추가할 수 있는 구조여야 한다. 핵심 기능의 변경 없이도 기능 확장이 가능해야 한다.                                                              |
| **NFR-07** | **접근성 (Accessibility)** | 키보드만으로 모든 기능에 접근할 수 있어야 하며, 스크린 리더(예: NVDA) 사용자를 위한 ARIA(Accessible Rich Internet Applications) 속성을 지원해야 한다. 색상 대비는 WCAG 2.1 AA 기준을 충족해야 한다.                               |
| **NFR-08** | **테스트 용이성 (Testability)** | 핵심 비즈니스 로직은 UI와 분리되어 단위 테스트가 가능해야 한다. 주요 기능에 대한 통합 테스트 및 UI 자동화 테스트를 지원하는 구조여야 한다. (예: UI 요소에 고유 ID 부여)                                                            |
| **NFR-09** | **유지보수성 (Maintainability)** | 코드는 사전에 정의된 코딩 표준(예: PEP 8)을 준수해야 하며, 주요 모듈과 함수에는 명확한 주석과 문서가 작성되어야 한다. 순환 참조를 피하고 모듈 간 결합도를 낮게 유지하는 설계를 따라야 한다.                                       |
