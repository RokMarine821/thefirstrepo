# GUI 디자인 명세서 (GDS) - DLT Log Analyzer

*   **문서 버전:** 1.1
*   **작성일:** 2025-09-25
*   **최종 수정일:** 2025-09-28
*   **프로젝트명:** DLT Log Analyzer (DLTHERO)
*   **관련 문서:** CuRS v1.6, SyRS v1.1

---

## 변경 이력

| 버전 | 날짜       | 변경 내용                                   | 작성자 |
| :--- | :--------- | :------------------------------------------ | :----- |
| 1.1  | 2025-09-28 | 변경 이력 추가 및 화면 레이아웃 스케치 개선 | Gemini |
| 1.0  | 2025-09-25 | CuRS/SyRS 기반으로 초기 GDS 문서 작성       | Gemini |

---

## 1. 개요 (Overview)

본 문서는 'DLT Log Analyzer'의 그래픽 사용자 인터페이스(GUI)에 대한 상세 디자인 명세를 정의한다. 사용자의 작업 흐름을 최적화하고, 복잡한 데이터를 직관적으로 탐색할 수 있는 전문 분석 도구를 만드는 것을 목표로 한다.

## 2. 디자인 원칙 (Design Principles)

*   **효율성 (Efficiency)**: 분석가의 작업 흐름을 방해하지 않고, 최소한의 클릭과 동작으로 원하는 작업을 수행할 수 있도록 설계한다.
*   **정보 중심 (Information-Centric)**: 로그 데이터를 중심으로 필터링, AI 분석, 시각화 등 모든 관련 정보를 한 화면에서 유기적으로 제공한다.
*   **직관성 (Intuitiveness)**: 전문 개발 도구(IDE, DB 툴 등)에 익숙한 사용자라면 별도의 학습 없이도 주요 기능을 쉽게 파악하고 사용할 수 있도록 설계한다.
*   **사용자 맞춤 (Customizability)**: 사용자가 자신의 작업 스타일에 맞게 패널의 크기, 위치 등을 자유롭게 조정하고 저장할 수 있는 유연한 작업 공간을 제공한다.

## 3. 전체 레이아웃 구조 (Overall Layout Structure)

전문가용 분석 툴에서 널리 사용되는 **다중 패널 도킹 레이아웃(Multi-Panel Docking Layout)**을 채택한다. `PyQt`의 `QMainWindow`와 `QDockWidget`을 사용하여 구현한다.

### 3.1 화면 레이아웃 스케치

```text
┌────────────────────────────────────────────────────────────────────────────────────────┐
│ ☰ DLT Log Analyzer (DLTHERO)                                                           │
├────────────────────────────────────────────────────────────────────────────────────────┤
│ 🗂️ 열기 💾 저장 📤 내보내기 │ 🔍 필터링 🤖 AI 분석 📊 시각화 ⚙️ 설정                   │
├──────────┬─────────────────────────────────────────────────────────────────────────────┤
│          │ ┌─[메인 로그 뷰]──────────────────────────────────────────────────────────┐ │
│ 필터 &   │ │ 🔢  Timestamp ▲  ECU    APP_ID   CTX_ID   Level    Payload               │ │
│ 탐색     │ ├─────────────────────────────────────────────────────────────────────────┤ │
│          │ │ 1. 10:30:01.123  ECU1   APP1     CTX1     <ERROR>  Memory allocation...  │ │
│ ├────────┤ │ 2. 10:30:01.456  ECU1   APP2     CTX2     <WARN>   Timeout occurred...   │ │
│ │⚡빠른 필터│ │ 3. 10:30:01.789  ECU2   APP3     CTX3     <INFO>   System starting...    │ │
│ │📜룰 목록 │ │ ...                                                                     │ │
│ │🔖북마크  │ └─────────────────────────────────────────────────────────────────────────┘ │
│ └────────┘ ┌─[심층 분석 패널]────────────────────────────────────────────────────────┐ │
│            │                                                                         │ │
│            │  [ AI 채팅 💬 | 시각화 📈 | 검색 결과 🔎 ]                               │ │
│            │ ┌─────────────────────────────────────────────────────────────────────┐ │ │
│            │ │ > 이 에러의 원인은 무엇인가요?                                        │ │ │
│            │ │ 🤖 메모리 할당 실패(memory allocation failed) 직후에 발생했습니다.  │ │ │
│            │ │    `memory_manager.c`의 125번째 라인을 확인해 보세요.                 │ │ │
│            │ │                                                                     │ │ │
│            │ │ [ 질문을 입력하세요...                                             ] │ │ │
│            │ └─────────────────────────────────────────────────────────────────────┘ │ │
│            └─────────────────────────────────────────────────────────────────────────┘ │
├──────────┴─────────────────────────────────────────────────────────────────────────────┤
│ 🔗 백엔드: 연결됨 ✅ │ 🗃️ 파일: my_log.dlt │ 로그: 1,523,456 (표시: 1,024) │ ⏳ 100% │
└────────────────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 영역별 상세 설명

#### ① 메인 로그 뷰 (Main Log View)
*   **역할**: 분석의 핵심이 되는 로그 데이터를 표시하는 중앙 작업 영역.
*   **구현**: `QTableView`와 `QAbstractTableModel`을 사용하여 대용량 데이터를 효율적으로 처리 (지연 로딩).
*   **기능**:
    *   로그 레벨(Error, Warning, Info 등)에 따라 행의 배경색을 다르게 표시하여 가독성 향상.
    *   컬럼 헤더를 클릭하여 정렬 가능.
    *   **컨텍스트 메뉴 (우클릭)**:
        *   `AI로 이 라인 분석하기`: 선택한 로그를 컨텍스트로 즉시 AI 분석 패널에 질문을 시작 (FR-04).
        *   `주석/태그 추가`: 특정 로그에 대한 메모를 남김 (FR-09).
        *   `북마크 추가/제거`: 중요한 로그를 북마크 패널에 추가.
        *   `복사`: 선택한 로그의 내용을 클립보드에 복사.

#### ② 좌측 패널 (Filter & Navigation Panel)
*   **역할**: 수많은 로그 속에서 원하는 정보를 빠르게 찾도록 돕는 탐색 도구 모음.
*   **구현**: `QDockWidget`으로 구현하여 사용자가 위치를 변경하거나 숨길 수 있음.
*   **기능**:
    *   **빠른 필터**: APP ID, Context ID, Log Level 등을 입력/선택하여 즉시 필터링.
    *   **규칙 목록**: 저장된 규칙들을 리스트로 보여주고, 체크박스로 간단하게 규칙을 활성화/비활성화 (FR-03).
        *   `[+]`, `[-]`, `[편집]` 버튼으로 '규칙 관리자' 대화상자를 열어 규칙을 관리 (FR-03.1).
    *   **북마크/주석 목록**: 사용자가 추가한 북마크나 주석을 모아 보여주며, 클릭 시 해당 로그 라인으로 즉시 이동.

#### ③ 하단 패널 (Deep Analysis Panel)
*   **역할**: 1차 분석 후 얻은 정보를 바탕으로 심층 분석을 수행하고 결과를 확인하는 공간.
*   **구현**: `QTabWidget`을 사용하여 여러 분석 도구를 탭으로 제공.
*   **기능**:
    *   **AI 채팅 탭**: 대화형 채팅 UI. 메인 로그 뷰와 연동되어 로그 컨텍스트를 포함한 질문 가능 (FR-04, FR-05).
    *   **시각화 탭**: 시간대별 에러 발생 빈도, 모듈별 로그 점유율 등을 차트(막대, 파이)로 표시 (FR-07). `pyqtgraph` 라이브러리 사용.
    *   **검색 결과 탭**: 정규 표현식을 포함한 고급 검색 기능의 결과를 목록으로 표시.

#### ④ 메뉴바, 툴바, 상태바
*   **메뉴바**: 파일(열기, 세션 저장/불러오기), 보기(패널 표시/숨기기), 도구(규칙 관리자, 설정), 도움말(정보) 등 전체 기능에 접근.
*   **툴바**: 가장 빈번하게 사용하는 기능(파일 열기, 세션 저장, 내보내기 등)을 아이콘 버튼으로 배치 (FR-01, FR-06, FR-08).
*   **상태바**: 현재 열린 파일 정보, 전체/필터링된 로그 수, 백엔드 엔진과의 연결 상태, 분석 진행률 등 명확한 피드백 제공.

## 4. 주요 화면 및 대화상자 디자인

### 4.1 규칙 관리자 (Rule Manager Dialog)
*   **목적**: 사용자가 코드를 직접 수정하지 않고도 필터링 규칙을 쉽게 생성하고 관리할 수 있도록 지원 (FR-03.1, FR-03.2).
*   **레이아웃**:
    *   **좌측**: 생성된 규칙 목록 (`QListView`).
    *   **우측**: 선택된 규칙의 상세 내용을 편집하는 영역.
        *   규칙 이름, 설명 (QLineEdit, QTextEdit).
        *   조건 추가/삭제 버튼.
        *   조건 목록: 각 조건은 `(필드 [APP_ID] 가 / 연산자 [equals] / 값 [APP1])` 형식으로 표시.
*   **기능**:
    *   규칙 추가, 삭제, 복제.
    *   규칙 일괄 가져오기/내보내기 (FR-03.3).

### 4.2 설정 (Settings Dialog)
*   **목적**: 애플리케이션의 동작을 사용자에 맞게 설정.
*   **레이아웃**: 좌측에 카테고리(일반, AI, 보안), 우측에 상세 설정 항목을 배치.
*   **설정 항목**:
    *   **AI**: AI 서비스 제공자 선택 (OpenAI, Google), API 키 입력.
    *   **보안**: API 키 저장 방식, 데이터 전송 정책 설정 (NFR-05).
    *   **표시**: 폰트, 테마(라이트/다크) 설정.

## 5. 사용자 경험(UX) 및 시각적 요소

### 5.1 테마 및 색상
*   **테마**: 개발자에게 익숙한 라이트(Light) 모드와 다크(Dark) 모드를 모두 지원한다.
*   **색상**:
    *   **Error**: 연한 빨간색 배경.
    *   **Warning**: 연한 노란색 배경.
    *   **Info/Debug**: 기본 배경색.
    *   **하이라이트**: 사용자가 선택하거나 검색 결과에 해당하는 라인은 별도의 색상(예: 파란색)으로 강조.

### 5.2 애니메이션 및 피드백
*   **로딩**: 대용량 파일 로딩 또는 분석 시 프로그레스 바(Progress Bar)를 상태바에 표시하여 진행 상태를 명확히 알린다.
*   **피드백**: 작업 성공 시 상태바에 잠시 메시지를 표시하고, 실패 시에는 오류 메시지 대화상자를 띄운다.

---